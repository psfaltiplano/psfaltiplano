<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamento UBS - Completo</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --bg: #f4f7f6; --text: #333; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--secondary); padding-bottom: 15px; margin-bottom: 20px; }
        
        .form-novo { background: #ebf2f7; padding: 15px; border-radius: 8px; margin-bottom: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; align-items: end; }
        .form-novo label { font-size: 0.85em; font-weight: bold; display: block; margin-bottom: 5px; }
        .form-novo input, .form-novo select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .btn-add { background: var(--secondary); color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .btn-add:hover { background: #2980b9; }
        .btn-export { background: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        .dia-bloco { margin-bottom: 30px; border: 1px solid #ddd; border-radius: 5px; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .dia-header { background: var(--primary); color: white; padding: 10px; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #f8f9fa; font-size: 0.85em; }
        
        .tag { font-size: 0.7em; padding: 2px 6px; border-radius: 4px; font-weight: bold; margin-right: 5px; }
        .tag-medica { background: #d1ecf1; color: #0c5460; }
        .tag-enfermeira { background: #f3e5f5; color: #7b1fa2; }
        .date-edit { border: 1px solid #ccc; border-radius: 3px; padding: 3px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Agenda UBS 2026</h1>
        <button class="btn-export" onclick="exportarParaTXT()">üì• Exportar para TXT</button>
    </header>

    <div class="form-novo">
        <div>
            <label>Nome do Paciente</label>
            <input type="text" id="novoNome" placeholder="Ex: Maria Silva">
        </div>
        <div>
            <label>Doc/OBS</label>
            <input type="text" id="novoDoc" placeholder="CPF ou ACS">
        </div>
        <div>
            <label>Profissional</label>
            <select id="novoTipo">
                <option value="M√âDICA">M√âDICA</option>
                <option value="ENFERMEIRA">ENFERMEIRA</option>
            </select>
        </div>
        <div>
            <label>Servi√ßo</label>
            <select id="novoServico">
                <option value="DEMANDA LIVRE">DEMANDA LIVRE</option>
                <option value="PR√â NATAL">PR√â NATAL</option>
                <option value="PUERICULTURA">PUERICULTURA</option>
                <option value="HIPERTENSOS/DIAB√âTICOS">HIPERTENSOS/DIAB√âTICOS</option>
                <option value="PREVEN√á√ÉO">PREVEN√á√ÉO</option>
            </select>
        </div>
        <div>
            <label>Data</label>
            <input type="date" id="novaData">
        </div>
        <button class="btn-add" onclick="adicionarAgendamento()">+ Adicionar</button>
    </div>

    <div id="agenda-content"></div>
</div>

<script>
let agendamentos = [
    // 06/01 - M√âDICA
    { nome: "Marcos T√∫lio de Oliveira Pinheiro", doc: "898004004221031", obs: "FILHO ROSANGELA", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-06" },
    { nome: "Maria do Socorro Galdino", doc: "704005139574370", obs: "", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-06" },
    { nome: "Joana Monteiro de Oliveira", doc: "095.945.683-05", obs: "ACS: PATRICIA", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-06" },
    { nome: "Francisca Joelma Rodrigues", doc: "708503328170176", obs: "ACS: PATRICIA", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-06" },
    { nome: "Joao Miguel Alves de Souza", doc: "127.839.933-09", obs: "ACS: Aline", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-06" },
    
    // 08/01 - M√âDICA & ENF
    { nome: "Jose Weino Pereira da Silva", doc: "706700514827510", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "ANA MERLYA OLIVEIRA GONCALVES", doc: "", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "PIETRO VALENTIN SOUZA CABRAL", doc: "", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "LAVINIA FRAN√áA FERREIRA", doc: "", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "AYLLA SOPHIA DA SILVA RIOS", doc: "", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "MARIA CLEIDE OLIVEIRA DE LIMA", doc: "700006275635007", obs: "CONSULTA NORMAL", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "JORGE RIBEIRO DE SOUZA", doc: "", obs: "acs patricia 17/12/2025", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "Maria Neide Amorim Tavares", doc: "20/10/1957", obs: "acs jo", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "jos√© ferreira tavares", doc: "23/10/1953", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-08" },
    { nome: "thialita alves de souza", doc: "", obs: "", tipo: "ENFERMEIRA", servico: "PUERICULTURA", data: "2026-01-08" },

    // 09/01 - ENFERMEIRA
    { nome: "MARIA ELENILDA DE SOUZA", doc: "", obs: "ACS HELENA", tipo: "ENFERMEIRA", servico: "DEMANDA LIVRE", data: "2026-01-09" },
    { nome: "PACIENTE (CNS)", doc: "898002314985895", obs: "", tipo: "ENFERMEIRA", servico: "DEMANDA LIVRE", data: "2026-01-09" },
    { nome: "PACIENTE (CPF)", doc: "604.465.133-93", obs: "", tipo: "ENFERMEIRA", servico: "DEMANDA LIVRE", data: "2026-01-09" },

    // 13/01 - M√âDICA
    { nome: "Salvelina Lopes de Oliveira", doc: "029.531.928-32", obs: "24/02/1953", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Elieuda Alves Batista", doc: "708703191606290", obs: "", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Joana Alves Bezerra de Oliveira", doc: "700009761558309", obs: "", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "VIVIAN MARINY BEZERRA DE CARVALHO OLIVEIRA", doc: "898004228990969", obs: "", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Noelia Maria Ferreira da Silva", doc: "127344441960005", obs: "", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "AURILA ANDRE DA SILVA", doc: "706301732017078", obs: "ACS j√¥", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "ANTONIO TEIXEIRA ALVES", doc: "705001467592051", obs: "jo", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "ROSA PINHEIRO LUCENA", doc: "704507395500310", obs: "JO", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "LIS MARIA MENDES DE ARAUJO", doc: "898005932658268", obs: "mateus", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Italo Batista Oliveira", doc: "160485619630001", obs: "acs helena", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Nagibe da Silva Costa", doc: "703209624243899", obs: "ACS MATEUS", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Theo Lucca Araujo chavier", doc: "898005920046955", obs: "acs j√¥", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Francisca Licia", doc: "705200433692379", obs: "acs dora", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },
    { nome: "Enzo Gabriel Clares de Oliveira", doc: "134.233.233-45", obs: "encaixe patr√≠cia", tipo: "M√âDICA", servico: "DEMANDA LIVRE", data: "2026-01-13" },

    // 13/01 - ENFERMEIRA
    { nome: "Maria de Fatima de Lima Santos", doc: "831.611.553-00", obs: "ACS MATEUS", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "MARIA ELENILDA DE SOUZA", doc: "163916490900005", obs: "ACS HELENA", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "MARINA VIDAL DE FREITAS", doc: "898002314985895", obs: "ACS JO", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "Samille Gon√ßalves de Moraes", doc: "604.465.133-93", obs: "ACS JO", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "FRANCISCA ANA DE SOUZA SILVA", doc: "704304559129090", obs: "ACS SIMONE", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "Maria Michelle Alves Taveira", doc: "898000499517018", obs: "acs dora", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },
    { nome: "Maria Mikaelly Alves Taveira", doc: "700403906831842", obs: "acs dora", tipo: "ENFERMEIRA", servico: "PREVEN√á√ÉO", data: "2026-01-13" },

    // 14/01 - M√âDICA
    { nome: "Elizama Soares Silva", doc: "054.618.093-08", obs: "ACS: Aline", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-01-14" },
    { nome: "Aline Emanuelle dos Santos", doc: "700905970097590", obs: "Acs: Simone", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-01-14" },
    { nome: "Leticia Alves de Oliveira", doc: "210039678350009", obs: "", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-01-14" },
    { nome: "Werliani Ferreira Silva", doc: "700302941997131", obs: "ACS MATEUS", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-01-14" },
    { nome: "Ingrid Noyale Sousa Fianca", doc: "898002705569709", obs: "ACS jo", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-01-14" },

    // 14/01 - ENFERMEIRA
    { nome: "Maria Vanessa Torres da Silva", doc: "708103513433238", obs: "ACS DORA", tipo: "ENFERMEIRA", servico: "PR√â NATAL", data: "2026-01-14" },
    { nome: "Samya Maria Alexandre Bezerra", doc: "209307035150009", obs: "ACS HELENA", tipo: "ENFERMEIRA", servico: "PR√â NATAL", data: "2026-01-14" },

    // 15/01 - M√âDICA
    { nome: "ALYNE KELY NEVES SOBREIRA", doc: "018.605.723-75", obs: "consulta", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-15" },
    { nome: "Maria Valdenice Batista Bezerra", doc: "708407237016667", obs: "consulta", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-15" },
    { nome: "Marciano Jota Medeiros", doc: "700002912762205", obs: "acs simone", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-15" },
    { nome: "JOSE VIANA DE ALMEIDA", doc: "", obs: "acs patricia", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-15" },
    { nome: "JADISON EMANUEL CONCEI√á√ÉO GUEDES", doc: "117.328.033-23", obs: "acs helena", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-01-15" },

    // 19/01 - M√âDICA
    { nome: "GRASSIELLE DA SILVA DE SOUSA", doc: "705008648207954", obs: "dora?", tipo: "M√âDICA", servico: "HIPERTENSOS/DIAB√âTICOS", data: "2026-01-19" },
    { nome: "edvan alvelino dos santos", doc: "702906597049678", obs: "acs mateus", tipo: "M√âDICA", servico: "HIPERTENSOS/DIAB√âTICOS", data: "2026-01-19" },
    { nome: "Maria de Fatima de Lima Santos", doc: "831.611.553-00", obs: "acs mateus", tipo: "M√âDICA", servico: "HIPERTENSOS/DIAB√âTICOS", data: "2026-01-19" },
    { nome: "KARLA MAYARA DE SOUSA CUNHA", doc: "707809681256217", obs: "acs dora", tipo: "M√âDICA", servico: "HIPERTENSOS/DIAB√âTICOS", data: "2026-01-19" },

    // FEVEREIRO
    { nome: "Nadia Raquel Costa Lima", doc: "898005892027653", obs: "", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-02-04" },
    { nome: "Selma Dias Batista", doc: "700504411029960", obs: "", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-02-04" },
    { nome: "JUSSARA LEONARDO DA SILVA", doc: "704107262970050", obs: "", tipo: "M√âDICA", servico: "PR√â NATAL", data: "2026-02-04" },
    { nome: "MARA THAIS CARLOS DE ARAUJO", doc: "707606246919797", obs: "", tipo: "ENFERMEIRA", servico: "PR√â NATAL", data: "2026-02-04" },
    { nome: "Lavinia Fran√ßa Ferreira", doc: "134.227.673-63", obs: "", tipo: "M√âDICA", servico: "PUERICULTURA", data: "2026-02-26" }
];

function renderizar() {
    const container = document.getElementById('agenda-content');
    container.innerHTML = '';
    let datas = [...new Set(agendamentos.map(a => a.data))].sort();

    datas.forEach(dataStr => {
        let listaDia = agendamentos.filter(a => a.data === dataStr);
        let dataObj = new Date(dataStr + 'T00:00:00');
        let dataFormatada = dataObj.toLocaleDateString('pt-BR', { weekday: 'long', day: '2-digit', month: '2-digit', year: 'numeric' }).toUpperCase();

        let div = document.createElement('div');
        div.className = 'dia-bloco';
        div.innerHTML = `
            <div class="dia-header">${dataFormatada}</div>
            <table>
                <thead><tr><th>Tipo</th><th>Paciente</th><th>Servi√ßo / Doc</th><th>Mudar Data</th><th>A√ß√£o</th></tr></thead>
                <tbody>${listaDia.map(p => `
                    <tr>
                        <td><span class="tag ${p.tipo === 'M√âDICA' ? 'tag-medica' : 'tag-enfermeira'}">${p.tipo}</span></td>
                        <td><strong>${p.nome}</strong></td>
                        <td>${p.servico} <br><small>${p.doc} ${p.obs || ''}</small></td>
                        <td><input type="date" class="date-edit" value="${p.data}" onchange="trocarData('${p.nome}', this.value)"></td>
                        <td><button onclick="remover('${p.nome}')" style="color:red; border:none; background:none; cursor:pointer;">‚úñ</button></td>
                    </tr>
                `).join('')}</tbody>
            </table>
        `;
        container.appendChild(div);
    });
}

function adicionarAgendamento() {
    const nome = document.getElementById('novoNome').value;
    const doc = document.getElementById('novoDoc').value;
    const tipo = document.getElementById('novoTipo').value;
    const servico = document.getElementById('novoServico').value;
    const data = document.getElementById('novaData').value;

    if (!nome || !data) {
        alert("Por favor, preencha pelo menos o Nome e a Data.");
        return;
    }

    agendamentos.push({ nome, doc, obs: "", tipo, servico, data });
    document.getElementById('novoNome').value = '';
    document.getElementById('novoDoc').value = '';
    renderizar();
}

function trocarData(nome, novaData) {
    let index = agendamentos.findIndex(a => a.nome === nome);
    if (index !== -1) {
        agendamentos[index].data = novaData;
        renderizar();
    }
}

function remover(nome) {
    if(confirm(`Remover agendamento de ${nome}?`)) {
        agendamentos = agendamentos.filter(a => a.nome !== nome);
        renderizar();
    }
}

function exportarParaTXT() {
    let conteudo = "RELAT√ìRIO DE AGENDAMENTOS UBS\n============================\n\n";
    let datas = [...new Set(agendamentos.map(a => a.data))].sort();
    
    datas.forEach(data => {
        const dataObj = new Date(data + 'T00:00:00');
        const dataFormatada = dataObj.toLocaleDateString('pt-BR');
        
        conteudo += `DATA: ${dataFormatada}\n`;
        agendamentos.filter(a => a.data === data).forEach(p => {
            // AQUI EST√Å A ALTERA√á√ÉO: Incluindo Doc/OBS na exporta√ß√£o
            conteudo += `- [${p.tipo}] ${p.nome}\n`;
            conteudo += `  Servi√ßo: ${p.servico}\n`;
            conteudo += `  Doc/OBS: ${p.doc || 'N/A'} ${p.obs || ''}\n\n`;
        });
        conteudo += "----------------------------\n";
    });

    const blob = new Blob([conteudo], { type: 'text/plain' });
    const link = document.createElement('a');
    link.href = window.URL.createObjectURL(blob);
    link.download = `agenda_atualizada.txt`;
    link.click();
}

renderizar();
</script>

</body>
</html>
