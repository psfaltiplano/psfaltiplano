<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Dinâmica Pré-Natal</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        
        .dia-grupo { margin-top: 30px; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; }
        .dia-header { background: #3498db; color: white; padding: 12px; font-weight: bold; font-size: 1.1em; }
        
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-size: 0.9em; color: #666; }
        
        .date-input { padding: 6px; border: 1px solid #3498db; border-radius: 4px; cursor: pointer; }
        .tag { font-size: 0.75em; padding: 3px 8px; border-radius: 10px; font-weight: bold; text-transform: uppercase; }
        .tag-medica { background: #e1f5fe; color: #0288d1; }
        .tag-enfermeira { background: #f3e5f5; color: #7b1fa2; }
        .acs { font-size: 0.85em; color: #7f8c8d; display: block; }
    </style>
</head>
<body>

<div class="container">
    <h1>Controle de Agendamentos</h1>
    <p style="text-align: center; color: #666;">Altere a data para mover o paciente de grupo automaticamente.</p>
    
    <div id="agenda-dinamica">
        </div>
</div>

<script>
// Dados Iniciais
const pacientes = [
    { nome: "Elizama Soares Silva", doc: "054.618.093-08", acs: "Aline", tipo: "MÉDICA", data: "2026-01-14" },
    { nome: "Aline Emanuelle dos Santos", doc: "700905970097590", acs: "Simone", tipo: "MÉDICA", data: "2026-01-14" },
    { nome: "Leticia Alves de Oliveira", doc: "CNS 210039678350009", acs: "?", tipo: "MÉDICA", data: "2026-01-14" },
    { nome: "Werliani Ferreira Silva", doc: "700302941997131", acs: "MATEUS?", tipo: "MÉDICA", data: "2026-01-14" },
    { nome: "Ingrid Noyale Sousa Fianca", doc: "898002705569709", acs: "Jo", tipo: "MÉDICA", data: "2026-01-14" },
    { nome: "Maria Vanessa Torres da Silva", doc: "708103513433238", acs: "DORA?", tipo: "ENFERMEIRA", data: "2026-01-14" },
    { nome: "Samya Maria Alexandre Bezerra", doc: "209307035150009", acs: "HELENA", tipo: "ENFERMEIRA", data: "2026-01-14" },
    { nome: "Antonia Rizangela Alves de Oliveira Ribeiro", doc: "", acs: "", tipo: "MÉDICA", data: "2026-01-21" },
    { nome: "Cicera Maria de Matos", doc: "700001240936103", acs: "", tipo: "MÉDICA", data: "2026-01-21" },
    { nome: "Fabricia de Souza Fideles", doc: "898002702145312", acs: "", tipo: "MÉDICA", data: "2026-01-21" },
    { nome: "MARIA WINNY GALDINO DA SILVA", doc: "MATEUS?", acs: "", tipo: "ENFERMEIRA", data: "2026-01-21" },
    { nome: "VIVIANE NUNES FERREIRA", doc: "708802762855910", acs: "", tipo: "ENFERMEIRA", data: "2026-01-21" },
    { nome: "Ana Carolaine dos Santos", doc: "704209784093389", acs: "", tipo: "MÉDICA", data: "2026-01-28" }
];

function renderizarAgenda() {
    const container = document.getElementById('agenda-dinamica');
    container.innerHTML = '';

    // Agrupar pacientes por data
    const grupos = {};
    pacientes.forEach((p, index) => {
        if (!grupos[p.data]) grupos[p.data] = [];
        grupos[p.data].push({ ...p, originalIndex: index });
    });

    // Ordenar as datas
    const datasOrdenadas = Object.keys(grupos).sort();

    datasOrdenadas.forEach(data => {
        const diaDiv = document.createElement('div');
        diaDiv.className = 'dia-grupo';
        
        // Formatar data para exibição
        const dataObj = new Date(data + 'T00:00:00');
        const dataFormatada = dataObj.toLocaleDateString('pt-BR', { weekday: 'long', year: 'numeric', month: 'numeric', day: 'numeric' }).toUpperCase();

        diaDiv.innerHTML = `
            <div class="dia-header">${dataFormatada}</div>
            <table>
                <thead>
                    <tr>
                        <th>Paciente / Profissional</th>
                        <th style="width: 150px;">Alterar Data</th>
                    </tr>
                </thead>
                <tbody id="lista-${data}"></tbody>
            </table>
        `;

        container.appendChild(diaDiv);
        const tbody = document.getElementById(`lista-${data}`);

        grupos[data].forEach(p => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>
                    <span class="tag ${p.tipo === 'MÉDICA' ? 'tag-medica' : 'tag-enfermeira'}">${p.tipo}</span>
                    <strong>${p.nome}</strong>
                    <span class="acs">${p.doc} ${p.acs ? '| ACS: ' + p.acs : ''}</span>
                </td>
                <td>
                    <input type="date" class="date-input" value="${p.data}" onchange="atualizarData(${p.originalIndex}, this.value)">
                </td>
            `;
            tbody.appendChild(tr);
        });
    });
}

function atualizarData(index, novaData) {
    pacientes[index].data = novaData;
    renderizarAgenda(); // Reorganiza a lista visualmente
}

// Inicializar
renderizarAgenda();
</script>

</body>
</html>
